<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- <script src="js/mindar-image.prod.js"></script> -->
    <script src="js/aframe-v1.4.2.min.js"></script>
    <script src="js/aframe-extras.min.js"></script>
    <script src="js/mindar-image-aframe.prod.js"></script>
    <script src="js/jquery-3.6.4.min.js"></script>
    <title>Lo Que Hubiera Sido | What Could Have Been</title>
  </head>
  <body>
    <a-scene mindar-image="imageTargetSrc: targets/targets.mind;filterMinCF:0.05; filterBeta: 100" color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">

      <a-assets>
        <video id="hs1" autoplay="true" webkit-playsinline playsinline loop crossorigin src="media/hs1-replacement.mp4" width="1916" height="1320"></video>
        <video id="hs2" autoplay="true" webkit-playsinline playsinline loop crossorigin src="media/hs2-replacement.mp4"></video>
        <video id="hs3" autoplay="true" webkit-playsinline playsinline loop crossorigin src="media/hs3-replacement.mp4"></video>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false" cursor="fuse: false; rayOrigin: mouse;" raycaster="far: 10000; objects: .clickable"></a-camera>
      
      <a-entity mindar-image-target="targetIndex: 0">
        <a-video src="#hs1" class="clickable" width="1" height="0.6875" position="0 0 0"></a-video>
      </a-entity>

      <a-entity mindar-image-target="targetIndex: 1">
        <a-video src="#hs2" class="clickable" width="1" height="0.75" position="0 0 0"></a-video>
      </a-entity>
      
      <a-entity mindar-image-target="targetIndex: 2">
        <a-video src="#hs3" class="clickable" width="0.8662" height="1" position="0 0 0"></a-video>
      </a-entity> 
      
    </a-scene>
    <script>
      jQuery(document).ready(function($){
        
        $("a-entity").on("targetFound", function(e){
          let id = $("a-video", this).attr("src");
          console.log($("a-video", this).attr("src"));
          $(id).get(0).play();
        });
        
        $("a-entity").on("targetLost", function(e){
          let id = $("a-video", this).attr("src");
          console.log($("a-video", this).attr("src"));
          $(id).get(0).pause();
        });

//        $("#romero").on("click", function(){
//          $(this).attr("src", "#priest-video");
//          $("#priest-video").get(0).play();
//          console.log("click on video")
//        });
//        
//        $("#audio").on("click", function(){
//          //$(this).attr("src", "src:url(/media/Hotspot-3-edited.mp3)");
//          //$(this).attr("autoplay", "true");
//          $("#hotspot-6").get(0).play();
//          console.log("audio clicked");
//        })
//        
//        $("#audio-holder").on("targetLost", function(){
//          $("#hotspot-6").get(0).pause();
//        })
//        
//
//        $("#romero-video-holder").on("targetLost", function(){
//          $("#priest-video").get(0).pause();
//        });
//        
//        $("#romero-video-holder").on("targetFound", function(){
//          if($("#priest-video").get(0).currentTime > 0 && $("#priest-video").get(0).paused){
//            $("#priest-video").get(0).play();
//          }
//        });

        // $("#audio").on("click", function(){
        //   $(this).attr("src", "#hotspot-6");
        //   $("#hotspot-6").get(0).play();
        // })

      })
    </script>
  </body>
</html>